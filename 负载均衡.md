# 负载均衡
 平均负载,使用uptime

    watch -d uptime

* 运行状态 Running, Runable 
* 不可中断状态 uninterruptible 

平均负载其实就是平均活跃进程数比如当平均负载为 2 时，意味着什么呢？
* 在只有 2 个 CPU 的系统上，意味着所有的 CPU 都刚好被完全占用。
* 在 4 个 CPU 的系统上，意味着 CPU 有 50% 的空闲。
* 而在只有 1 个 CPU 的系统中，则意味着有一半的进程竞争不到 CPU。

平均负载不仅包括了正在使用 CPU 的进程，还包括等待 CPU 和等待 I/O 的进程。而 CPU 使用率，是单位时间内 CPU 繁忙情况的统计，跟平均负载并不一定完全对应。比如：
* CPU 密集型进程，使用大量 CPU 会导致平均负载升高，此时这两者是一致的；
* I/O 密集型进程，等待 I/O 也会导致平均负载升高，但 CPU 使用率不一定很高；
* 大量等待 CPU 的进程调度也会导致平均负载升高，此时的 CPU 使用率也会比较高。

cup使用率
* 正在使用cpu,使用mpstat

        # -P ALL 表示监控所有CPU，后面数字5表示间隔5秒后输出一组数据
        mpstat -P ALL 5 
* 等待cpu

        # 间隔5秒后输出一组数据，-u表示CPU指标
        pidstat -u 5 1 